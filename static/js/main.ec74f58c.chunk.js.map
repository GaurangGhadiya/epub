{"version":3,"sources":["lib/styles/palette.ts","lib/styles/zIndex.ts","components/header/Wrapper.tsx","components/header/Layout.tsx","lib/styles/styles.ts","lib/styles/media.ts","components/header/Logo.tsx","components/header/ControlBtn.tsx","containers/Header.tsx","components/footer/Wrapper.tsx","components/footer/Item.tsx","lib/svg/Prev.js","lib/svg/Next.js","lib/svg/BookClose.js","lib/svg/BookOpen.js","lib/svg/Close.js","lib/svg/Down.js","lib/svg/ScrollHorizontal.js","lib/svg/ScrollVertical.js","lib/svg/Search.js","components/footer/MoveBtn.tsx","containers/Footer.tsx","components/sideMenu/CloseBtn.tsx","components/sideMenu/Wrapper.tsx","components/nav/BookInfo.tsx","components/nav/NavItem.tsx","containers/menu/Nav.tsx","components/option/Layout.tsx","components/option/OptionWrapper.tsx","components/option/OptionTitle.tsx","components/option/DropdownValue.tsx","components/option/DropdownItemWrapper.tsx","components/option/DropdownItem.tsx","components/option/Dropdown.tsx","components/option/OptionValue.tsx","components/option/SliderValue.tsx","components/option/Slider.tsx","components/option/ControlIconBtnWrapper.tsx","components/option/ControlIconBtn.tsx","containers/menu/Option.tsx","components/note/highlight/Wrapper.tsx","components/note/highlight/Title.tsx","components/note/highlight/Post.tsx","slices/book.ts","lib/utils/commonUtil.ts","containers/menu/commons/Highlight.tsx","components/note/Layout.tsx","components/sideMenu/MenuEmpty.tsx","containers/menu/Note.tsx","lib/styles/viewerLayout.ts","components/contextMenu/Wrapper.tsx","components/contextMenu/ColorItem.tsx","components/contextMenu/Item.tsx","containers/commons/ContextMenu.tsx","lib/styles/animations.ts","components/commons/Snackbar.tsx","slices/snackbar.ts","containers/commons/Snackbar.tsx","components/commons/ViewerWrapper.tsx","LoadingView.tsx","slices/index.ts","lib/hooks/useMenu.ts","lib/hooks/useHighlight.ts","containers/Reader.tsx","index.tsx"],"names":["palette","white","black","gray0","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","red0","red1","red2","red3","red4","red5","red6","red7","red8","orange0","orange1","orange2","orange3","orange4","orange5","orange6","orange7","orange8","yellow0","yellow1","yellow2","yellow3","yellow4","yellow5","yellow6","yellow7","yellow8","green0","green1","green2","green3","green4","green5","green6","green7","green8","blue0","blue1","blue2","blue3","blue4","blue5","blue6","blue7","blue8","purple0","purple1","purple2","purple3","purple4","purple5","purple6","purple7","purple8","zIndexSet","layer","zIndex","header","menu","modal","snackbar","tooltip","Wrapper","styled","div","Layout","AutoLayout","noselect","transition","boxShadow","scrollbar","width","mediaQuery","maxWidth","mediaValue","media","xlarge","large","medium","small","xsmall","custom","a","styles","Img","img","Logo","href","target","src","alt","Btn","button","ControlBtn","message","onClick","Header","onNavToggle","onOptionToggle","onLearningToggle","Container","Item","text","SvgPrev","props","xmlns","viewBox","id","fill","d","opacity","className","SvgNext","SvgBookClose","SvgBookOpen","SvgClose","SvgDown","stroke","strokeLinecap","strokeLinejoin","strokeWidth","SvgScrollHorizontal","cx","cy","r","SvgScrollVertical","SvgSearch","Content","MoveBtn","type","Icon","PrevIcon","NextIcon","msg","title","Footer","nowPage","totalPage","onPageMove","CloseIcon","CloseBtn","ref","show","onClose","children","React","forwardRef","BookImg","BookContent","Title","Info","BookInfo","publisher","author","NavItem","Nav","control","onToggle","onLocation","book","useSelector","state","bookToc","toc","Tocs","map","t","idx","label","loc","display","open","coverURL","OptionWrapper","OptionTitle","isDropdown","span","DropdownValue","value","Down","DropdownItemWrapper","DropdownItem","DropdownWrapper","Dropdown","defaultValue","valueList","onSelect","useRef","useState","visible","setVisible","useCallback","e","current","path","includes","Items","font","useEffect","document","addEventListener","removeEventListener","OptionValue","active","SliderWrapper","SliderBackground","SliderBar","percentage","Slider","input","SliderValue","minValue","maxValue","step","onChange","Math","round","min","max","disabled","BtnWrapper","ControlIconBtnWrapper","isSelected","css","ControlIconBtn","HeaderIcon","ScrollVerticalIcon","ScrollHorizontalIcon","BookOpenIcon","BookCloseIcon","Option","bookStyle","bookOption","bookFlow","emitEvent","onBookStyleChange","onBookOptionChange","fontFamily","setFontFamily","fontSize","setFontSize","lineHeight","setLineHeight","marginHorizontal","setMarginHorizontal","marginVertical","setMarginVertical","isScrollHorizontal","setIsScrollHorizontal","spread","viewType","setViewType","onChangeSlider","onClickDirection","flow","onClickViewType","isSpread","timer","window","setTimeout","clearTimeout","Post","color","initialBook","description","published_date","modified_date","language","initialState","currentLocation","chapterName","currentPage","startCfi","endCfi","base","highlights","colorList","name","code","bookSlice","createSlice","reducers","updateBook","action","payload","updateCurrentPage","clearBook","updateToc","clearToc","pushHighlight","filter","h","key","length","push","updateHighlight","new_idx","old_idx","indexOf","splice","popHighlight","actions","compareCfi","cfi_1","cfi_2","EpubCFI","compare","cfiRangeSpliter","cfiRange","slice","split","origin","start","end","getParagraphCfi","Highlight","highlight","viewerRef","dispatch","useDispatch","now","Date","toISOString","accessTime","splitCfi","setLocation","svgContainer","querySelector","targetSvg","childNodes","chpaterName","content","MenuEmpty","Note","onClickHighlight","highlightList","setHighlightList","contextmenuWidth","viewerLayout","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","VIEWER_FOOTER_HEIGHT","VIEWER_SIDEMENU_WIDTH","x","innerWidth","y","innerHeight","height","isReverse","ColorWrapper","Color","Message","ColorItem","blur","ContextMenu","selection","onAddHighlight","onRemoveHighlight","onUpdateHighlight","onContextmMenuRemove","menuRef","setHighlight","setDisplay","isEraseBtn","setIsEraseBtn","setIsReverse","setHeight","setY","ColorList","update","onRemoveHighlight_","onRemove","onKeyPress","paragraphCfi","filtered","highlight_","iframe","node","contentWindow","scrolledTarget","itemCnt","defaultHeight","y_","animations","fadeIn","keyframes","fadeOut","fadeInTop","fadeOutTop","fadeInBottom","fadeOutBottom","fadeInLeft","fadeOutLeft","fadeInRight","fadeOutRight","spin","Snackbar","RefEvent","newSnackbar","createAsyncThunk","event","shift","SnackbarSlice","deleteSnackbar","appendSnackbar","SnackbarWrapper","preventDefault","stopPropagation","ViewerWrapper","LoadingWrapper","LoadingView","reducer","combineReducers","store","configureStore","useMenu","delay","eventSignal","setEventSignal","setControl","epubIframe","useHighlight","setIsContextMenu","setSelection","onSelection","iframeWin","baseCfiRange","targetCfiRange","splitCfi1","splitCfi2","s1","e1","s2","e2","clashCfiRange","getSelection","removeAllRanges","position","viewer","CONTEXTMENU_WIDTH","windowWidth","windowHeight","iframeWidth","offsetWidth","scrollTop","selection_","rangeCount","getRangeAt","getBoundingClientRect","selectionX","selectionY","selectionHeight","selectionWidth","getSelectionPosition","toString","trim","highlightNode","targetNode","parentElement","dataset","epubcfi","createTime","pageNum","offHighlight","forEach","cfi","replace","cfiPath","Number","iframeBody","body","component","n","bookmark","getNodefromCfi","onHighlight","Reader","url","loadingView","navRef","optionRef","learningRef","isContextMenu","setBookStyle","resizeOnOrientationChange","setBookOption","navControl","optionControl","learningControl","viewerStyle","viewerOption","onBookInfoChange","onPageChange","page","onTocChange","result","prevPage","nextPage","bookStyle_","bookOption_","ReaderWrapper","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ec74f58c.chunk.js","sourcesContent":["/*\n :::: Color Varient ::::\n*/\nconst palette = {\n  white: '#ffffff',\n  black: '#000000',\n  /* gray */\n  gray0: '#fafafa',\n  gray1: '#e7e7e7',\n  gray2: '#c3c3c3',\n  gray3: '#9e9e9e',\n  gray4: '#868686',\n  gray5: '#656565',\n  gray6: '#505050',\n  gray7: '#3c3c3c',\n  gray8: '#282828',\n  /* red */\n  red0: '#ffe8e8',\n  red1: '#ffd0d1',\n  red2: '#ff8a8b',\n  red3: '#ff4445',\n  red4: '#ff1517',\n  red5: '#bf1011',\n  red6: '#990d0e',\n  red7: '#73090a',\n  red8: '#4d0607',\n  /* orange */\n  orange0: '#fff0ec',\n  orange1: '#ffe2d9',\n  orange2: '#ffb6a0',\n  orange3: '#ff8966',\n  orange4: '#ff6c40',\n  orange5: '#bf5130',\n  orange6: '#994126',\n  orange7: '#73311d',\n  orange8: '#4d2013',\n  /* yellow */\n  yellow0: '#fffce6',\n  yellow1: '#fffacc',\n  yellow2: '#fff280',\n  yellow3: '#feea33',\n  yellow4: '#fee500',\n  yellow5: '#bfac00',\n  yellow6: '#988900',\n  yellow7: '#726700',\n  yellow8: '#4c4500',\n  /* green */\n  green0: '#e6f7e6',\n  green1: '#cdefcc',\n  green2: '#83d880',\n  green3: '#39c133',\n  green4: '#07b100',\n  green5: '#058500',\n  green6: '#046a00',\n  green7: '#035000',\n  green8: '#023500',\n  /* blue */\n  blue0: '#ebf1ff',\n  blue1: '#d7e3ff ',\n  blue2: '#9cb9ff ',\n  blue3: '#618eff ',\n  blue4: '#3972ff ',\n  blue5: '#2b56bf ',\n  blue6: '#224499 ',\n  blue7: '#1a3373 ',\n  blue8: '#11224d ',\n  /* purple */\n  purple0: '#f2ebff',\n  purple1: '#d7e3ff',\n  purple2: '#be9cff',\n  purple3: '#9761ff',\n  purple4: '#7d39ff',\n  purple5: '#5e2bbf',\n  purple6: '#4b2299',\n  purple7: '#381a73',\n  purple8: '#26114d',\n};\n\nexport default palette","export const zIndexSet = (layer: number): string => `\n\t${layer}\n`;\n\nconst zIndex = {\n\theader: zIndexSet(5),\n\tmenu: zIndexSet(10),\n\tmodal: zIndexSet(100),\n\tsnackbar: zIndexSet(400),\n\ttooltip: zIndexSet(500)\n};\n\nexport default zIndex;","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport zIndex from 'lib/styles/zIndex'\n\nconst Wrapper = styled.div`\n  position: sticky;\n  width: 100%;\n  height: auto;\n  left: 0;\n  top: 0;\n  background-color: ${palette.white};\n  z-index: ${zIndex.header};\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport zIndex from 'lib/styles/zIndex'\n\nconst Layout = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 64px;\n  z-index: ${zIndex.header};\n`;\n\nexport const AutoLayout = styled.div`\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 2px solid ${palette.gray1};\n\n  & > div {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n  }\n  & > div:last-child {\n    margin-right: 8px;\n  }\n`;\n\nexport default Layout","export const noselect = (): string => `\n\t-webkit-touch-callout: none;\n\t-webkit-user-select: none;\n\t-khtml-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n`;\n\nexport const transition = (): string =>`\n\tcubic-bezier(0.25, 0.1, 0.25, 1);\n`;\n\nexport const boxShadow = {\n\tlight: \"0px 4px 16px rgba(0, 0, 0, 0.04)\",\n\tregular: \"0px 8px 12px rgba(0, 0, 0, 0.2)\",\n\tbold: \"0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 8px 2px rgba(0,0,0,0.12), 0 5px 5px -3px rgba(0,0,0,0.2)\"\n};\n\nexport const scrollbar = (width=8) => `\n\t&::-webkit-scrollbar {\n\t\twidth: ${width}px;\n\t\tbackground: transparent;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground: #ddd;\n\t\tborder-radius: 10px;\n\t}\n\t&::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #ccc;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n`","export const mediaQuery = (maxWidth: number): string => `\n\t@media (max-width: ${maxWidth}px)\n`;\n\nexport const mediaValue = {\n\txlarge: 1600,\n\tlarge: 1440,\n\tmedium: 1200,\n\tsmall: 702,\n\txsmall: 350\t\n};\n\ntype Media = {\n\txlarge : string,\n\tlarge : string,\n\tmedium : string,\n\tsmall : string,\n\txsmall : string,\n\tcustom : (maxWidth: number) => string\n}\n\nconst media: Media = {\n\txlarge : mediaQuery(mediaValue.xlarge),\n\tlarge : mediaQuery(mediaValue.large),\n\tmedium : mediaQuery(mediaValue.medium),\n\tsmall : mediaQuery(mediaValue.small),\n\txsmall : mediaQuery(mediaValue.xsmall),\n\tcustom : mediaQuery,\n};\n\nexport default media;","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\nimport { mediaQuery } from 'lib/styles/media'\n\nconst Logo = () => {\n\treturn (\n\t\t<Wrapper href=\"https://github.com/altmshfkgudtjr/react-epub-viewer\" target=\"__blank__\">\n\t\t\t<Img src=\"/react-epub-viewer/images/logo.png\" alt=\"Logo\" />\n\t\t</Wrapper>\n\t);\n}\n\nconst Wrapper = styled.a`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\toutline: none;\n\tmargin-left: 16px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: .2s ${styles.transition};\n\tborder-radius: 8px;\n\tpadding: 4px 8px;\n\tcursor: pointer;\n\n\t${mediaQuery(700)} {\n\t\tdisplay: none;\n\t}\n\n\t&:focus, &:hover {\n\t\tbackground-color: ${palette.blue0};\n\t}\n`;\n\nconst Img = styled.img`\n\theight: 44px;\n`;\n\nexport default Logo","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst ControlBtn = ({ message, onClick }: Props) => {\n  return <Btn onClick={() => onClick()}>{message}</Btn>;\n}\n\nconst Btn = styled.button`\n  height: 100%;\n  padding: 0 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ${styles.transition};\n  outline: none;\n\n  &:focus, &:hover {\n    color: ${palette.blue3};\n  }\n\n  &:first-child {\n    margin-left: 8px;\n  }\n`;\n\ninterface Props {\n  message: string;\n  onClick: (value?: boolean) => void;\n}\n\nexport default ControlBtn","// components\nimport Wrapper from 'components/header/Wrapper'\nimport Layout, { AutoLayout } from 'components/header/Layout'\nimport Logo from 'components/header/Logo'\nimport ControlBtn from 'components/header/ControlBtn'\n\nconst Header = ({\n  onNavToggle, \n  onOptionToggle, \n  onLearningToggle\n}: Props) => {\n  return (\n    <Wrapper>\n      <Layout>\n        <AutoLayout>\n          <Logo />\n          <div>\n            <ControlBtn message=\"Contents\" onClick={onNavToggle} />\n            <ControlBtn message=\"Setting\" onClick={onOptionToggle} />\n            <ControlBtn message=\"Highlights\" onClick={onLearningToggle} />\n          </div>\n        </AutoLayout>\n      </Layout>\n    </Wrapper>\n  );\n}\n\ninterface Props {\n  onNavToggle: (value?: boolean) => void;\n  onOptionToggle: (value?: boolean) => void;\n  onLearningToggle: (value?: boolean) => void;\n}\n\nexport default Header","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst Wrapper = styled.div`\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${palette.white};\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst Item = ({ text }: Props) => {\n  return (\n    <Container>\n      <span>{text}</span>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  flex-basis: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & > span {\n    color: ${palette.gray4};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n`;\n\ninterface Props {\n  text: string;\n}\n\nexport default Item;","import * as React from \"react\";\n\nfunction SvgPrev(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\" {...props}>\n      <defs>\n        <style>\n          {\n            \".prev_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"prev_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"prev_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h44v44H0z\" opacity={0.3} />\n          <path className=\"prev_svg__cls-3\" d=\"M12 22L32 2M12 22l20 20\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgPrev;\n","import * as React from \"react\";\n\nfunction SvgNext(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\" {...props}>\n      <defs>\n        <style>\n          {\n            \".next_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"next_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"next_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h44v44H0z\" opacity={0.3} />\n          <path className=\"next_svg__cls-3\" d=\"M32 22L12 2M32 22L12 42\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgNext;\n","import * as React from \"react\";\n\nfunction SvgBookClose(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".bookClose_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"bookClose_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"bookClose_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path\n            className=\"bookClose_svg__cls-3\"\n            d=\"M37.12 3H10.88a3 3 0 00-.43 0A1.71 1.71 0 009.1 4.11a1.87 1.87 0 00-.1.59v29.18c0 1 0 .94 1.88 1.88l18 9a1.8 1.8 0 002.6-1.2 3 3 0 000-.31v-7.58h5.62A1.88 1.88 0 0039 33.8V4.87A1.88 1.88 0 0037.12 3z\"\n          />\n          <path\n            className=\"bookClose_svg__cls-3\"\n            d=\"M31.5 35.67V14.84a2 2 0 00-1.1-1.78L10.45 3\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgBookClose;\n","import * as React from \"react\";\n\nfunction SvgBookOpen(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".bookOpen_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"bookOpen_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"bookOpen_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path\n            className=\"bookOpen_svg__cls-3\"\n            d=\"M4 6.5a27.24 27.24 0 0120 1v34a27.24 27.24 0 00-20-1zM24 7.5a27.24 27.24 0 0120-1v34a27.24 27.24 0 00-20 1\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgBookOpen;\n","import * as React from \"react\";\n\nfunction SvgClose(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".close_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"close_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"close_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path className=\"close_svg__cls-3\" d=\"M4 4l40 40M4 44L44 4\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgClose;\n","import * as React from \"react\";\n\nfunction SvgDown(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <g data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g data-name=\"\\uB808\\uC774\\uC5B4 1\">\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path\n            d=\"M8.33 15.82l14.32 20.46a1.63 1.63 0 002.7 0l14.32-20.46A1.78 1.78 0 0038.32 13H9.68a1.78 1.78 0 00-1.35 2.82z\"\n            stroke=\"#000\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgDown;\n","import * as React from \"react\";\n\nfunction SvgScrollHorizontal(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".scrollHorizontal_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle\n            className=\"scrollHorizontal_svg__cls-3\"\n            cx={24}\n            cy={24}\n            r={5}\n          />\n          <path\n            className=\"scrollHorizontal_svg__cls-3\"\n            d=\"M3 24l12-12M3 24l12 12M45 24L33 12M45 24L33 36\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgScrollHorizontal;\n","import * as React from \"react\";\n\nfunction SvgScrollVertical(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".scrollVertical_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"scrollVertical_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"scrollVertical_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle className=\"scrollVertical_svg__cls-3\" cx={24} cy={24} r={5} />\n          <path\n            className=\"scrollVertical_svg__cls-3\"\n            d=\"M24 3l12 12M24 3L12 15M24 45l12-12M24 45L12 33\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgScrollVertical;\n","import * as React from \"react\";\n\nfunction SvgSearch(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".search_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"search_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"search_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle className=\"search_svg__cls-3\" cx={17} cy={17} r={14} />\n          <path className=\"search_svg__cls-3\" d=\"M44 44L27 27\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgSearch;\n","import styled from 'styled-components'\n// icons\nimport { PrevIcon, NextIcon } from 'lib/svg'\n// lib\nimport * as styles from 'lib/styles/styles'\n\nconst MoveBtn = ({ type, onClick }: Props) => {\n  const Icon = type === \"PREV\"\n    ? PrevIcon\n    : NextIcon;\n  \n  const msg = type === \"PREV\"\n    ? \"이전 페이지\"\n    : \"다음 페이지\";\n\n  return (\n    <Container onClick={onClick} title={msg}>\n      <Content>\n        <Icon />\n      </Content>\n    </Container>\n  );\n}\n\nconst Container = styled.button`\n  min-width: 60px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  outline: none;\n\n  &:focus, &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg) brightness(113%) contrast(101%);\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ${styles.transition};\n\n  & > svg {\n    width: 18px;\n    height: 18px;\n  }\n`;\n\ninterface Props {\n  type: \"PREV\" | \"NEXT\"\n  onClick: () => void;\n}\n\nexport default MoveBtn;","// components\nimport Wrapper from 'components/footer/Wrapper'\nimport Item from 'components/footer/Item'\nimport MoveBtn from 'components/footer/MoveBtn'\n\n\nconst Footer = ({ title, nowPage, totalPage, onPageMove }: Props) => {\n  return (\n    <Wrapper>\n      <MoveBtn type=\"PREV\" onClick={() => onPageMove(\"PREV\")} />\n      <Item text={title} />\n      <Item text={`${nowPage} / ${totalPage}`} />\n      <MoveBtn type=\"NEXT\" onClick={() => onPageMove(\"NEXT\")} />\n    </Wrapper>\n  );\n}\n\ninterface Props {\n  title: string;\n  nowPage: number;\n  totalPage: number;\n  onPageMove: (type: \"PREV\" | \"NEXT\") => void;\n}\n\nexport default Footer","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\n// icons\nimport { CloseIcon } from 'lib/svg'\n\nconst CloseBtn = ({ onClick }: Props) => {\n  return (\n    <Btn onClick={onClick}>\n      <Icon />\n    </Btn>\n  );\n}\n\nconst Btn = styled.button`\n  position: relative;\n  height: 100%;\n  padding: 0 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ${styles.transition};\n  outline: none;\n\n  &:focus, &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg) brightness(113%) contrast(101%);\n  }\n`;\n\nconst Icon = styled(CloseIcon)`\n  width: 18px;\n  height: 18px;\n`;\n\ninterface Props {\n  onClick: () => void;\n}\n\nexport default CloseBtn;","import React from 'react'\nimport styled from 'styled-components'\n// components\nimport CloseBtn from 'components/sideMenu/CloseBtn'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport zIndex from 'lib/styles/zIndex'\nimport palette from 'lib/styles/palette'\n\nconst Wrapper = ({ title, show, onClose, children }: Props, ref: any) => {\n  return (\n    <Container show={show} ref={ref}>\n      <Header>\n        <span>{title}</span>\n        <CloseBtn onClick={onClose} />\n      </Header>\n      {children}\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  width: 340px;\n  max-width: 95vw;\n  height: 100vh;\n  top: 0;\n  right: 0;\n  z-index: ${zIndex.menu};\n  box-shadow: -4px 0 8px 0 rgba(0,0,0,.16);\n  background-color: ${palette.white};\n  border-radius: 16px 0 0 16px;\n  transform: ${({ show }: { show: boolean }) => show \n    ? `translateX(0px) scale(1)`\n    : `translateX(420px) scale(.9)`\n  };\n  transition: .4s ${styles.transition};\n  overflow-y: auto;\n  ${styles.scrollbar(0)};\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  min-height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 4px;\n\n  & > span {\n    padding-left: 24px;\n    font-size: 21px;\n    font-weight: 600;\n  }\n`;\n\ninterface Props {\n  title: string;\n  show: boolean;\n  onClose: () => void;\n  children?: React.ReactNode;\n}\n\nexport default React.forwardRef(Wrapper)","import styled from 'styled-components'\n\nconst BookInfo = ({src=\"\", title ,publisher, author}: Props) => {\n  return (\n    <Container>\n      <BookImg src={src} alt={title} />\n      <BookContent>\n        <Title>{title}</Title>\n        <Info>{publisher}</Info>\n        <Info>{author}</Info>\n      </BookContent>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  padding: 24px;\n`;\n\nconst BookImg = styled.img`\n  margin-right: 12px;\n  width: 44%;\n  min-width: 120px;\n  border-radius: 4px;\n  background: #eee;\n`;\n\nconst BookContent = styled.div`\n  flex-grow: 1;\n`;\n\nconst Title = styled.div`\n  font-weight: 500;\n  margin-bottom: 4px;\n`;\n\nconst Info = styled.div`\n  font-size: 14px;\n  margin-bottom: 4px;\n`;\n\ninterface Props {\n  src: string;\n  title: string;\n  publisher: string;\n  author: string;\n}\n\nexport default BookInfo","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst NavItem = ({ message, onClick }: Props) => {\n  return (\n    <Content onClick={onClick}>\n      <span>{message}</span>\n    </Content>\n  );\n}\n\nconst Content = styled.button`\n  width: 100%;\n  height: 48px;\n  box-sizing: border-box;\n  padding: 12px 24px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  background-color: ${palette.gray0};\n  outline: none;\n  \n  & > span {\n    transition: .2s ${styles.transition};\n    font-size: 14px;\n  }\n\n  &:focus, &:hover {\n    & > span {\n      color: ${palette.blue3};\n      margin-left: 12px;\n    }\n  }\n\n  &:last-child {\n    margin-bottom: 32px;\n  }\n`;\n\ninterface Props {\n  message: string;\n  onClick: () => void;\n}\n\nexport default NavItem","import React from 'react'\nimport { useSelector } from 'react-redux'\n// components\nimport Wrapper from 'components/sideMenu/Wrapper'\nimport BookInfo from 'components/nav/BookInfo'\nimport NavItem from 'components/nav/NavItem'\n// types\nimport { RootState } from 'slices'\nimport Book from 'types/book'\nimport Toc from 'types/toc'\nimport { MenuControl } from 'lib/hooks/useMenu'\n\nconst Nav = ({ control, onToggle, onLocation }: Props, ref: any) => {\n  const book = useSelector<RootState, Book>(state => state.book.book);\n  const bookToc = useSelector<RootState, Toc[]>(state => state.book.toc);\n  \n  /** Click nav item */\n  const onClickItem = (loc: string) => {\n    onLocation(loc);\n    onToggle();\n  }\n\n  const Tocs = bookToc.map((t, idx) => \n    <NavItem key={idx}\n             message={t.label}\n             onClick={() => onClickItem(t.href)} />\n  );\n  \n  \n  return (<>\n    {control.display && <Wrapper title=\"Contents\"\n                                 show={control.open}\n                                 onClose={onToggle}\n                                 ref={ref}>\n      <BookInfo \n        src={book.coverURL}\n        title={book.title}\n        publisher={book.publisher}\n        author={book.author} \n      />\n      {Tocs}\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  control: MenuControl;\n  onToggle: () => void;\n  onLocation: (loc: string) => void;\n}\n\nexport default React.forwardRef(Nav)","import styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  box-sizing: border-box;\n  padding: 24px;\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n\nconst OptionWrapper = styled.div`\n  margin-bottom: 24px;\n`;\n\nexport default OptionWrapper","import styled from 'styled-components'\n\nconst OptionTitle = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 16px;\n`;\n\nexport default OptionTitle","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n// icons\nimport { DownIcon } from 'lib/svg'\n\nconst DropdownValue = ({ value, isDropdown, onClick }: Props) => {\n  return (\n    <Container \n      onClick={onClick}\n      isDropdown={isDropdown}\n      title=\"Select font\"\n    >\n      <Content>{value}</Content>\n      <Icon isDropdown={isDropdown}>\n        <DownIcon />\n      </Icon>\n    </Container>\n  );\n}\n\nconst Container = styled.button<{isDropdown: boolean}>`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n  width: 100%;\n  height: 40px;\n  background-color: ${palette.white};\n  border: ${({isDropdown}) => isDropdown\n    ? `2px solid ${palette.blue3}`\n    : `2px solid ${palette.gray1}`\n  };\n  border-radius: ${({isDropdown}) => isDropdown\n    ? \"20px 20px 0 0\"\n    : \"20px\"\n  };\n  box-sizing: border-box;\n  padding: 0px 16px;\n  cursor: pointer;\n  z-index: 4;\n  transition: .1s ${styles.transition};\n  text-align: left;\n  outline: none;\n\n  &:hover, &:focus {\n    border: 2px solid ${palette.blue3};\n\n    & > div {\n      opacity: 1;\n      filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg) brightness(113%) contrast(101%);\n    }\n  }\n`;\n\nconst Content = styled.span`\n  flex-grow: 1;\n  margin-right: 16px;\n  font-size: 14px;\n`;\n\nconst Icon = styled.div<{isDropdown: boolean}>`\n  display: flex;\n  width: 12px;\n  height: 12px;\n  opacity: .3;\n  \n  & > svg {\n    transform-origin: center;\n    transform: ${({isDropdown}) => isDropdown\n      ? 'rotate(180deg)'\n      : 'rotate(0deg)'\n    };\n  }\n`;\n\ninterface Props {\n  value: string;\n  isDropdown: boolean;\n  onClick: (e: any) => void;\n}\n\nexport default DropdownValue","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst DropdownItemWrapper = ({ show, children }: Props) => {\n  return <Container show={show}>{children}</Container>\n}\n\nconst Container = styled.div<{show: boolean}>`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  max-height: 200px;\n  overflow-y: auto;\n  box-sizing: border-box;\n  padding: 0 0 16px 0;\n  background-color: ${palette.white};\n  border: 2px solid ${palette.blue3};\n  z-index: 3;\n  border-radius: ${({show}) => show\n    ? '0 0 20px 20px'\n    : '20px'\n  };\n  transition: .4s ${styles.transition};\n  opacity: ${({show}) => show\n    ? '1'\n    : '0'\n  };\n  transform-origin: top;\n  transform: ${({show}) => show\n    ? 'translateY(-2px) scaleY(1);'\n    : 'translateY(-40px) scaleY(0);'\n  };\n  ${styles.scrollbar(6)}\n  ${({show}) => show\n    ? ''\n    : styles.noselect\n  };\n`;\n\ninterface Props {\n  show: boolean;\n  children: React.ReactElement[];\n}\n\nexport default DropdownItemWrapper","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\n\nconst DropdownItem = ({ value, onClick }: Props) => {\nconst text = value === \"Origin\" ? \"Original\" : value;\n\n  return <Container onClick={onClick}>{text}</Container>;\n}\n\nconst Container = styled.button`\n  width: 100%;\n  height: 40px;\n  box-sizing: border-box;\n  padding: 0 16px;\n  transition: .1s ${styles.transition};\n  font-size: 14px;\n  line-height: 40px;\n  cursor: pointer;\n  text-align: left;\n  outline: none;\n  \n  &:focus, &:hover {\n    background-color: rgba(0,0,0,.05);\n  }\n`;\n\ninterface Props {\n  value: string;\n  onClick: () => void;\n}\n\nexport default DropdownItem","import { useState, useEffect, useRef, useCallback } from 'react'\nimport styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\nimport DropdownValue from 'components/option/DropdownValue'\nimport DropdownItemWrapper from 'components/option/DropdownItemWrapper'\nimport DropdownItem from 'components/option/DropdownItem'\n// types\nimport { BookFontFamily } from 'types/book'\n\nconst Dropdown = ({\n  title,\n  defaultValue,\n  valueList,\n  onSelect\n}: Props) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [visible, setVisible] = useState<boolean>(false);\n  const value = defaultValue === \"Origin\" ? \"Original\" : defaultValue;\n  \n  /** Toggle dropdown */\n  const onToggle = useCallback(() => setVisible(!visible), [visible]);\n\n  /** Close dropdown */\n  const onClose = useCallback((e: any) => {\n    if (!ref || !ref.current) return;\n    if (![...e.path].includes(ref.current)) {\n      onToggle();\n    }\n  }, [ref, onToggle]);\n\n  const Items = valueList.map(font => \n    <DropdownItem key={font} value={font} onClick={() => {\n      onSelect(font);\n      onToggle();\n    }} />\n  );\n\n  /** Register dropdown close event */\n  useEffect(() => {\n    if (visible) {\n      document.addEventListener('click', onClose);\n    } else {\n      document.removeEventListener('click', onClose);\n    }\n    return () => {\n      document.removeEventListener('click', onClose);\n    }\n  }, [visible, onClose]);\n\n  return (\n    <OptionWrapper>\n      <OptionTitle>{title}</OptionTitle>\n\n      <DropdownWrapper ref={ref}>\n        <DropdownValue value={value} \n                       isDropdown={visible} \n                       onClick={onToggle} />\n        <DropdownItemWrapper show={visible}>\n          {Items}\n        </DropdownItemWrapper>\n      </DropdownWrapper>\n    </OptionWrapper>\n  );\n}\n\nconst DropdownWrapper = styled.div`\n  position: relative;\n`;\n\ninterface Props {\n  title: string;\n  defaultValue: BookFontFamily;\n  valueList: BookFontFamily[];\n  onSelect: (font: BookFontFamily) => void;\n}\n\nexport default Dropdown","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst OptionValue = styled.span<{ active: boolean }>`\n  display: inline-block;\n  font-size: 14px;\n  color: ${props => props.active\n    ? palette.blue3\n    : palette.gray4\n  };\n  margin-right: 8px;\n  width: 40px;\n  text-align: right;\n  line-height: 20px;\n`;\n\nexport default OptionValue","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport * as styles from 'lib/styles/styles'\n\nconst SliderValue = ({ \n  active, \n  minValue, \n  maxValue, \n  defaultValue, \n  step, \n  onChange \n}: Props) => {\n  const percentage = Math.round((defaultValue - minValue) / (maxValue - minValue) * 100);\n\n  return (<>\n    <Icon>-</Icon>\n    <SliderWrapper>\n      <SliderBackground />\n      <SliderBar \n        active={active}\n        percentage={percentage}\n      />\n      <Slider\n        type=\"range\" \n        min={minValue}\n        max={maxValue}\n        defaultValue={defaultValue}\n        step={step}\n        onChange={onChange}\n        active={active}\n        disabled={!active} />\n    </SliderWrapper>\n    <Icon>+</Icon>\n  </>);\n}\n\nconst SliderWrapper = styled.div`\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n  width: auto;\n`;\n\nconst SliderBackground = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  background-color: #eee;\n  border-radius: 6px;\n  z-index: 0;\n`;\n\nconst SliderBar = styled.div<{ percentage: number, active: boolean }>`\n  position: absolute;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  width: ${({ percentage }) => percentage + '%'};\n  height: 6px;\n  border-radius: 6px 0 0 6px;\n  background-color: ${props => props.active\n    ? palette.blue4\n    : palette.gray2\n  };\n\tz-index: 1;\n`;\n\nconst Slider = styled.input<{ active: boolean }>`\n  appearance: none;\n  width: 100%;\n  height: 6px;\n  background-color: transparent;\n  border-radius: 6px;\n  margin: 0;\n  z-index: 2;\n  outline: none;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 18px;\n    height: 18px;\n    border-radius: 18px;\n    box-shadow: ${styles.boxShadow.regular};\n    background-color: white;\n    transition: .2s ${styles.transition};\n    transition-property: box-shadow, background-color;\n    border: ${props => props.active\n      ? `2px solid ${palette.blue3}`\n      : `2px solid ${palette.gray4}`\n    };\n    cursor: ${props => props.active\n        ? 'pointer'\n        : ''\n      };;\n\n    &:hover {\n      background-color: ${props => props.active\n        ? palette.blue1\n        : ''\n      };\n    }\n\n    &:active {\n      box-shadow: none;\n      background-color: ${props => props.active\n        ? palette.blue3\n        : ''\n      };\n    }\n  }\n\n  &:focus::-webkit-slider-thumb {\n    box-shadow: none;\n    background-color: ${palette.blue3};\n  }\n`;\n\nconst Icon = styled.span`\n  font-size: 12px;\n  font-weight: 500;\n  color: ${palette.gray4};\n  margin: 0 8px;\n  line-height: 20px;\n`;\n\ninterface Props {\n  active: boolean;\n  minValue: number;\n  maxValue: number;\n  defaultValue: number;\n  step: number;\n  onChange: (e: any) => void;\n}\n\nexport default SliderValue","import styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\nimport OptionValue from 'components/option/OptionValue'\nimport SliderValue from 'components/option/SliderValue'\n\nconst Slider = ({\n  active,\n  title,\n  minValue,\n  maxValue,\n  defaultValue,\n  step,\n  onChange\n}: Props) => {\n  const onChangeValue = (e: any) => {\n    if (!active) return;\n    onChange(e);\n  }\n  \n  \n  return (\n    <OptionWrapper>\n      <OptionTitle>{title}</OptionTitle>\n      \n      <SliderWrapper>\n        <OptionValue active={active}>{defaultValue}</OptionValue>\n        <SliderValue active={active}\n                     minValue={minValue}\n                     maxValue={maxValue}\n                     defaultValue={defaultValue}\n                     step={step}\n                     onChange={onChangeValue} />\n      </SliderWrapper>\n    </OptionWrapper>\n  );\n}\n\nconst SliderWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 20px;\n`;\n\ninterface Props {\n  active: boolean;\n  title: string;\n  minValue: number;\n  maxValue: number;\n  defaultValue: number;\n  step: number;\n  onChange: (e: any) => void;\n}\n\nexport default Slider","import styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\n\nconst ControlIconBtnWrapper = ({ title, children }: Props) => {\n\treturn (\n\t\t<OptionWrapper>\n\t\t\t<OptionTitle>{title}</OptionTitle>\n\t\t\t<BtnWrapper>\n\t\t\t\t{children}\n\t\t\t</BtnWrapper>\n\t\t</OptionWrapper>\n\t);\n}\n\nconst BtnWrapper = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-around;\n\tpadding: 8px 0;\n`;\n\ninterface Props {\n\ttitle: string;\n\tchildren: any[]\n}\n\nexport default ControlIconBtnWrapper","import styled, { css } from 'styled-components'\n// icons\nimport { \n  ScrollHorizontalIcon,\n  ScrollVerticalIcon,\n  BookCloseIcon,\n  BookOpenIcon\n} from 'lib/svg'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst ControlIconBtn = ({ type, alt, active, isSelected, onClick }: Props) => {\n  let HeaderIcon = null;\n  switch (type) {\n    case \"ScrollVertical\":\n      HeaderIcon = ScrollVerticalIcon;\n      break;\n    case \"ScrollHorizontal\":\n      HeaderIcon = ScrollHorizontalIcon;\n      break;\n    case \"BookOpen\":\n      HeaderIcon = BookOpenIcon;\n      break;\n    case \"BookClose\":\n      HeaderIcon = BookCloseIcon;\n      break;\n  }\n  \n  const onClickBtn = () => {\n    if (active) onClick();\n  }\n\n  return (\n    <Btn \n      onClick={onClickBtn} \n      isSelected={isSelected}\n      active={active}\n      title={alt}\n    >\n      <Icon>\n        <HeaderIcon />\n      </Icon>\n    </Btn>\n  );\n}\n\nconst Btn = styled.button<{ isSelected: boolean, active: boolean }>`\n  position: relative;\n  height: 100%;\n  padding: 0 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 0;\n  transition: .3s ${styles.transition};\n  opacity: ${({active}) => active\n    ? '1'\n    : '.3'\n  };\n  cursor: ${({active}) => active\n    ? 'pointer'\n    : 'default'\n  };\n  outline: none;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: -1;\n    border-radius: 30px;\n    width: ${({isSelected}) => isSelected\n      ? '32px'\n      : '8px'\n    };\n    height: ${({isSelected}) => isSelected\n      ? '32px'\n      : '8px'\n    };\n    opacity: ${({active, isSelected}) => active && isSelected\n      ? '.7'\n      : '0'\n    };\n    transition: .1s ${styles.transition};\n    background-color: ${palette.blue1};\n  }\n\n  &:focus, &:hover {\n    ${({active}) => active\n      ? css`\n        &:before {\n          width: 32px;\n          height: 32px;\n          opacity: 1;\n        }\n      `\n      : \"\"\n    };\n    \n  }\n`;\n\nconst Icon = styled.div`\n  width: 16px;\n  height: 16px;\n\n  & > div, & > svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\ntype HeaderIcon = \n  \"ScrollHorizontal\" |\n  \"ScrollVertical\" |\n  \"BookOpen\" |\n  \"BookClose\";\n\ninterface Props {\n  type: HeaderIcon;\n  alt: string;\n  active: boolean;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\nexport default ControlIconBtn","import React from 'react'\nimport { useState, useEffect } from 'react'\n// components\nimport Wrapper from 'components/sideMenu/Wrapper'\nimport OptionLayout from 'components/option/Layout'\nimport OptionDropdown from 'components/option/Dropdown'\nimport OptionSlider from 'components/option/Slider'\nimport ControlIconBtnWrapper from 'components/option/ControlIconBtnWrapper'\nimport ControlIconBtn from 'components/option/ControlIconBtn'\n// types\nimport { BookStyle, BookFontFamily, BookFlow } from 'types/book'\nimport { MenuControl } from 'lib/hooks/useMenu'\nimport { BookOption } from 'types/book'\n\nconst Option = ({ \n  control, \n  bookStyle,\n  bookOption,\n  bookFlow,\n  onToggle, \n  emitEvent,\n  onBookStyleChange,\n  onBookOptionChange\n}: Props, ref: any) => {\n  const [fontFamily, setFontFamily] = useState<BookFontFamily>(bookStyle.fontFamily);\n  const [fontSize, setFontSize] = useState<number>(bookStyle.fontSize);\n  const [lineHeight, setLineHeight] = useState<number>(bookStyle.lineHeight);\n  const [marginHorizontal, setMarginHorizontal] = useState<number>(bookStyle.marginHorizontal);\n  const [marginVertical, setMarginVertical] = useState<number>(bookStyle.marginVertical);\n  const [isScrollHorizontal, setIsScrollHorizontal] = useState<boolean>(true);\n  const [viewType, setViewType] = useState<ViewType>({\n    active: true,\n    spread: true\n  });\n\n\n  /** Change font family */\n  const onSelectFontFamily = (font: BookFontFamily) => setFontFamily(font);\n\n  /** Change font style and layout */\n  const onChangeSlider = (type: SliderType, e: any) => {\n    if (!e || !e.target) return;\n    switch (type) {\n      case \"FontSize\":\n        setFontSize(e.target.value);\n        break;\n      case \"LineHeight\":\n        setLineHeight(e.target.value);\n        break;\n      case \"MarginHorizontal\":\n        setMarginHorizontal(e.target.value);\n        break;\n      case \"MarginVertical\":\n        setMarginVertical(e.target.value);\n        break;\n      default:\n        break;\n    }\n  }\n\n  /** \n   * Select view direction\n   * @param type Direction\n   */\n   const onClickDirection = (type: \"Horizontal\" | \"Vertical\") => {\n    if (type === \"Horizontal\") {\n      setIsScrollHorizontal(true);\n      setViewType({ ...viewType, active: true });\n      onBookOptionChange({\n        ...bookOption,\n        flow: \"paginated\"\n      });\n    } else {\n      setIsScrollHorizontal(false);\n      setViewType({ ...viewType, active: false });\n      onBookOptionChange({\n        ...bookOption,\n        flow: \"scrolled-doc\"\n      });\n    }\n  }\n\n  /**\n   * Select isSpread\n   * @param isSpread Whether spread view \n   */\n  const onClickViewType = (isSpread: boolean) => {\n    if (isSpread) {\n      setViewType({ ...viewType, spread: true });\n      onBookOptionChange({\n        ...bookOption,\n        spread: \"auto\"\n      });\n    } else {\n      setViewType({ ...viewType, spread: false });\n      onBookOptionChange({\n        ...bookOption,\n        spread: \"none\"\n      });\n    }\n  }\n\n\n  /* Save userdata */\n  // TODO Fix the infinite re-rendering issue, when inlcude `onBookStyleChange` to dependencies array.\n  /* eslint-disable */\n  useEffect(() => {\n    const timer = window.setTimeout(() => { \n      onBookStyleChange({\n        fontFamily,\n        fontSize,\n        lineHeight,\n        marginHorizontal,\n        marginVertical\n      });\n    }, 250);\n\n    return () => window.clearTimeout(timer);\n  }, [\n    fontFamily, \n    fontSize, \n    lineHeight, \n    marginHorizontal, \n    marginVertical\n  ]);\n  /* eslint-enable */\n\n  /** Re-register close event, when after set */\n  useEffect(() => emitEvent(), [bookStyle, emitEvent]);\n\n  \n  return (<>\n    {control.display && <Wrapper title=\"Setting\"\n                                 show={control.open}\n                                 onClose={onToggle}\n                                 ref={ref}>\n      <OptionLayout>\n        <ControlIconBtnWrapper title=\"View Direction\">\n          <ControlIconBtn type=\"ScrollHorizontal\"\n                          alt=\"Horizontal View\"\n                          active={true}\n                          isSelected={isScrollHorizontal}\n                          onClick={() => onClickDirection(\"Horizontal\")} />\n          <ControlIconBtn type=\"ScrollVertical\" \n                          alt=\"Vertical View\"\n                          active={true}\n                          isSelected={!isScrollHorizontal}\n                          onClick={() => onClickDirection(\"Vertical\")} />\n        </ControlIconBtnWrapper>\n        <ControlIconBtnWrapper title=\"View Spread\">\n          <ControlIconBtn type=\"BookOpen\" \n                          alt=\"Two Page View\"\n                          active={viewType.active}\n                          isSelected={viewType.spread}\n                          onClick={() => onClickViewType(true)} />\n          <ControlIconBtn type=\"BookClose\" \n                          alt=\"One Page View\"\n                          active={viewType.active}\n                          isSelected={!viewType.spread}\n                          onClick={() => onClickViewType(false)} />\n        </ControlIconBtnWrapper>\n        <OptionDropdown title=\"Font\"\n                        defaultValue={fontFamily}\n                        valueList={[\"Origin\", \"Roboto\"]}\n                        onSelect={onSelectFontFamily} />\n        <OptionSlider active={true}\n                      title=\"Size\"\n                      minValue={8}\n                      maxValue={36}\n                      defaultValue={fontSize}\n                      step={1}\n                      onChange={(e) => onChangeSlider(\"FontSize\", e)} />\n        <OptionSlider active={true}\n                      title=\"Line height\"\n                      minValue={1}\n                      maxValue={3}\n                      defaultValue={lineHeight}\n                      step={0.1}\n                      onChange={(e) => onChangeSlider(\"LineHeight\", e)} />\n        <OptionSlider active={true}\n                      title=\"Horizontal margin\"\n                      minValue={0}\n                      maxValue={100}\n                      defaultValue={marginHorizontal}\n                      step={1}\n                      onChange={(e) => onChangeSlider(\"MarginHorizontal\", e)} />\n        <OptionSlider active={bookFlow === \"paginated\"}\n                      title=\"Vertical margin\"\n                      minValue={0}\n                      maxValue={100}\n                      defaultValue={marginVertical}\n                      step={1}\n                      onChange={(e) => onChangeSlider(\"MarginVertical\", e)} />\n      </OptionLayout>\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  control: MenuControl;\n  bookStyle: BookStyle;\n  bookOption: BookOption;\n  bookFlow: BookFlow;\n  onToggle: () => void;\n  emitEvent: () => void;\n  onBookStyleChange: (bookStyle: BookStyle) => void;\n  onBookOptionChange: (bookOption: BookOption) => void;\n}\n\ntype SliderType = \"FontSize\" \n  | \"LineHeight\" \n  | \"MarginHorizontal\" \n  | \"MarginVertical\";\n\ntype ViewType = {\n  active: boolean,\n  spread: boolean\n}\n\nexport default React.forwardRef(Option)","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport * as styles from 'lib/styles/styles'\n\nconst Wrapper = styled.button`\n  padding: 16px 24px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  background-color: ${palette.gray0};\n  transition: .1s ${styles.transition};\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  border-bottom: 1px solid ${palette.gray1};\n  \n  &:nth-child(2) {\n    border-top: 1px solid ${palette.gray1};\n  }\n\n  & > div {\n    color: inherit;\n    flex-grow: 1;\n  }\n\n  &:hover > *, &:focus > * {\n    color: ${palette.blue3};\n  }\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n\nconst Title = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: inherit;\n`;\n\nexport default Title","import styled from 'styled-components'\n\nconst Post = styled.div<{ color: string }>`\n  position: relative;\n  font-size: 14px;\n  margin-top: 16px;\n  padding: 8px;\n  box-sizing: border-box;\n\n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    background-color: ${({ color }) => color};\n    opacity: .3;\n    border-radius: 8px;\n    mix-blend-mode: multiply;\n  }\n`;\n\nexport default Post","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n// types\nimport Book from 'types/book'\nimport Page from 'types/page'\nimport Toc from 'types/toc'\nimport Highlight, { Color } from 'types/highlight'\n// lib\nimport palette from 'lib/styles/palette'\n\n\n/* \n\tInitial State\n*/\n\n/** 초기 Book 상태 */\nconst initialBook: Book = {\n\tcoverURL: '',\n\ttitle: '',\n\tdescription: '',\n\tpublished_date: '',\n\tmodified_date: '',\n\tauthor: '',\n\tpublisher: '',\n\tlanguage: ''\n}\n\n/** 초기 CurrentPage 상태 */\nconst initialCurrentLocation: Page = {\n\tchapterName: \"-\",\n\tcurrentPage: 0,\n\ttotalPage: 0,\n\tstartCfi: '',\n\tendCfi: '',\n\tbase: ''\n}\n\n/** 초기 색상표 상태 */\nconst initialColorList: Color[] = [\n\t{ name: 'Red', code: palette.red4 },\n\t{ name: 'Orange', code: palette.orange4 },\n\t{ name: 'Yellow', code: palette.yellow4 },\n\t{ name: 'Green', code: palette.green4 },\n\t{ name: 'Blue', code: palette.blue4 },\n\t{ name: 'Purple', code: palette.purple4 }\n]\n\nconst initialState: BookState = {\n\tbook: initialBook,\n\tcurrentLocation: initialCurrentLocation,\n\ttoc: [],\n\thighlights: [],\n\tcolorList: initialColorList,\n}\n\n\n/* \n\tSlice\n*/\nconst bookSlice = createSlice({\n\tname: 'book',\n\tinitialState,\n\treducers: {\n\t\t/** Book 갱신 @dispatch */\n\t\tupdateBook(state, action: PayloadAction<Book>) {\n\t\t\tstate.book = action.payload;\n\t\t},\n\t\t/** CurrentPage 갱신 @dispatch */\n\t\tupdateCurrentPage(state, action: PayloadAction<Page>) {\n\t\t\tstate.currentLocation = action.payload;\n\t\t},\n\t\t/** Book 초기화 @dispatch */\n\t\tclearBook(state) {\n\t\t\tstate.book = initialBook;\n\t\t},\n\t\t/** 목차 갱신 @dispatch */\n\t\tupdateToc(state, action: PayloadAction<Toc[]>) {\n\t\t\tstate.toc = action.payload;\n\t\t},\n\t\t/** 목차 초기화 @dispatch */\n\t\tclearToc(state) {\n\t\t\tstate.toc = [];\n\t\t},\n\t\t/** 하이라이트 추가 */\n\t\tpushHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst check = state.highlights.filter(h => h.key === action.payload.key);\n\t\t\tif (check.length > 0) return;\n\t\t\tstate.highlights.push(action.payload);\n\t\t},\n\t\t/** 하이라이트 갱신 */\n\t\tupdateHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst new_idx = action.payload.key;\n\t\t\tconst old_idx = state.highlights.map(h => h.key).indexOf(new_idx);\n\t\t\tstate.highlights.splice(old_idx, 1, action.payload);\n\t\t},\n\t\t/** 하이라이트 삭제 */\n\t\tpopHighlight(state, action: PayloadAction<string>) {\n\t\t\tconst idx = state.highlights.map(h => h.key).indexOf(action.payload);\n\t\t\tstate.highlights.splice(idx, 1);\n\t\t}\n\t}\n});\n\n\nexport interface BookState {\n\tbook: Book;\n\tcurrentLocation: Page;\n\ttoc: Toc[];\n\thighlights: Highlight[];\n\tcolorList: Color[];\n}\n\nexport const { \n\tupdateBook,\n\tclearBook,\n\tupdateCurrentPage,\n\tupdateToc,\n\tclearToc,\n\tpushHighlight,\n\tupdateHighlight,\n\tpopHighlight\n } = bookSlice.actions;\n \nexport default bookSlice.reducer","import { EpubCFI } from 'epubjs'\n// types\nimport { BookStyle, BookFlow } from 'types/book'\n\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\n export const timeFormatter = (time: Date): string => {\n\tconst yyyy = time.getFullYear();\n\tconst mm = time.getMonth() + 1;\n\tconst dd = time.getDate();\n\tconst msg = `${yyyy}-${mm}-${dd}`;\n\n\treturn msg;\n}\n\n\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\nexport const compareCfi = (cfi_1: string, cfi_2: string): number => {\n\tconst epubcfi = new EpubCFI();\n\treturn epubcfi.compare(cfi_1, cfi_2);\n};\n\n\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const cfiRangeSpliter = (cfiRange: string) => {\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\n\tif (!origin || !start || !end) return null;\n\n\tconst startCfi = `epubcfi(${origin + start})`;\n\tconst endCfi = `epubcfi(${origin + end})`;\n\treturn { startCfi, endCfi }\n}\n\n\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\nexport const clashCfiRange = (baseCfiRange: string, targetCfiRange: string) => {\n\tconst splitCfi1 = cfiRangeSpliter(baseCfiRange);\n\tconst splitCfi2 = cfiRangeSpliter(targetCfiRange);\n\n\tif (!splitCfi1 || !splitCfi2) return null;\n\n\tconst { startCfi: s1, endCfi: e1 } = splitCfi1;\n\tconst { startCfi: s2, endCfi: e2 } = splitCfi2;\n\n\tif ((compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0)\n\t\t||(compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0)\n\t\t||(compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const getParagraphCfi = (cfiRange: string) => {\n\tif (!cfiRange) return;\n\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\t\n\tif (!origin || !start || !end) return null;\n\n\tconst cfi = `epubcfi(${origin})`;\n\treturn cfi;\n}\n\n\n/**\n * Get specific DOM Element from CFI\n * - **※ Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\nexport const getNodefromCfi = (cfi: string): HTMLElement | null => {\n\tconst epubcfi = cfi.slice(8, -1);\n\n\t/* Remove Id */\n\tconst pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n\n\t/* Only CFI Base */\n\tconst splitCfi = pureCfi.split('!');\n\tif (splitCfi.length < 1 || splitCfi[1] === \"\") {\n\t\treturn null;\n\t}\n\n\t/* Remove Body tag CFI */\n\tconst cfiPath: number[] = splitCfi[1].split('/')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .slice(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .map(x => Number(x));\n\n\tconst iframe = document.querySelector('iframe');\n\tif (!iframe) return null;\n\t\n\tconst iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n\tif (!iframeBody) return null;\n\n\tlet component: HTMLElement | null = iframeBody;\n\n\t/* Find Node based on CFI */\n\tfor (let idx of cfiPath) {\n\t\tconst childNodes: any = component && component.childNodes;\n\n\t\t/* Bookmark / Highlight filtering.. */\n\t\tconst filtered = ([...childNodes].filter(n => !n.dataset \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.bookmark\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.highlight ));\n\t\tcomponent = filtered[idx - 1];\n\n\t\tif (!component) {\n\t\t\tcomponent = null;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn component;\n}\n\n\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\nexport const getSelectionPosition = (\n\tviewer: any,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow,\n\tMIN_VIEWER_WIDTH: number,\n\tMIN_VIEWER_HEIGHT: number,\n\tVIEWER_HEADER_HEIGHT: number,\n\tCONTEXTMENU_WIDTH: number\n): { x: number, y: number, height: number, width: number } | null => {\n\tconst { \n\t\tinnerWidth: windowWidth,\n\t\tinnerHeight: windowHeight \n\t} = window;\n\n\tconst iframeWidth = viewer.offsetWidth;\n\n\tconst scrollTop = viewer.querySelector('div').scrollTop;\n\n\tconst iframe = viewer.querySelector('iframe');\n\tconst selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n\tif (!selection_ || selection_.rangeCount === 0) return null;\n\n\tconst range = selection_.getRangeAt(0);\n\tconst {\n\t\tx: selectionX,\n\t\ty: selectionY,\n\t\theight: selectionHeight,\n\t\twidth: selectionWidth\n\t} = range.getBoundingClientRect();\n\n\tconst marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n\tconst marginTop = bookFlow === \"scrolled-doc\"\n\t\t? 0\n\t\t: ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n\n\tconst x = ~~(selectionX % iframeWidth + marginLeft + ( selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n\tconst y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n\n\treturn { \n\t\tx, \n\t\ty, \n\t\theight: selectionHeight, \n\t\twidth: selectionWidth \n\t};\n}\n\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\n export function debounce<Params extends any[]>(\n  timeout: number,\n  func: (...args: Params) => any,\n): (...args: Params) => void {\n  let timer: NodeJS.Timeout\n  return (...args: Params) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...args)\n    }, timeout)\n  }\n}","import { useDispatch } from 'react-redux'\n// components\nimport Wrapper from 'components/note/highlight/Wrapper'\nimport Title from 'components/note/highlight/Title'\nimport Post from 'components/note/highlight/Post'\n// slices\nimport { updateHighlight } from 'slices/book'\n// utils\nimport { cfiRangeSpliter } from 'lib/utils/commonUtil'\n// types\nimport HighlightType from 'types/highlight'\n\nconst Highlight = ({ \n  highlight, \n  onClick, \n  emitEvent, \n  viewerRef\n}: Props) => {\n  const dispatch = useDispatch();\n\n\n  /** 하이라이트 클릭 */\n  const onClickHighlight = () => {\n    if (!viewerRef.current) return;\n    \n    const now = new Date().toISOString();\n    dispatch(updateHighlight({\n      ...highlight,\n      accessTime: now\n    }));\n\n    const splitCfi = cfiRangeSpliter(highlight.cfiRange);\n    if (!splitCfi) return;\n\n    const { startCfi } = splitCfi;\n\n    viewerRef.current.setLocation(startCfi);\n\n    emitEvent();\n\n    const svgContainer = viewerRef.current.querySelector(\"svg\");\n    if (!svgContainer) return;\n\n    const targetSvg = svgContainer.querySelector(`g[data-epubcfi=\"${highlight.cfiRange}\"]`);\n    if (!targetSvg) return;\n\n    onClick(targetSvg.childNodes[0]);\n  }\n  \n  return (\n    <Wrapper onClick={onClickHighlight}>\n      <div>\n        <Title>{highlight.chpaterName}</Title>\n\n        <Post color={highlight.color}>{highlight.content}</Post>\n      </div>\n    </Wrapper>\n  );\n}\n\ninterface Props {\n  highlight: HighlightType;\n  onClick: (highlightNode: any) => void;\n  emitEvent: () => void;\n  viewerRef: any;\n}\n\nexport default Highlight","import styled from 'styled-components'\n\nconst Layout = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  padding: 24px 0;\n`;\n\nexport default Layout","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst MenuEmpty = ({ text }: Props) => {\n  return <Content>{text}</Content>;\n}\n\nconst Content = styled.div`\n  flex-grow: 1;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${palette.blue2};\n  font-size: 14px;\n`;\n\ninterface Props {\n  text: string;\n}\n\nexport default MenuEmpty","import React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\n// containers\nimport Highlight from 'containers/menu/commons/Highlight'\n// components\nimport Wrapper from 'components/sideMenu/Wrapper'\nimport LearningLayout from 'components/note/Layout'\nimport MenuEmpty from 'components/sideMenu/MenuEmpty'\n// types\nimport { RootState } from 'slices'\nimport HighlightType from 'types/highlight'\nimport { MenuControl } from 'lib/hooks/useMenu'\n\n\nconst Note = ({ \n  control, \n  onToggle, \n  onClickHighlight, \n  emitEvent,\n  viewerRef \n}: Props, ref: any) => {\n  const highlights = useSelector<RootState, HighlightType[]>(state => state.book.highlights);\n  const [highlightList, setHighlightList] = useState<any[]>([]);\n\n\n  /** Set highlight contents */\n  useEffect(() => {\n    const Items = highlights.map(h => <Highlight key={h.key} \n                                                 highlight={h}\n                                                 onClick={onClickHighlight} \n                                                 emitEvent={emitEvent}\n                                                 viewerRef={viewerRef} />\n    );\n    setHighlightList(Items); \n  }, [\n    viewerRef,\n    highlights,\n    onClickHighlight,\n    emitEvent,\n    setHighlightList\n  ]);\n\n\n  return (<>\n    {control.display && <Wrapper title=\"Highlight\"\n                                 show={control.open}\n                                 onClose={onToggle}\n                                 ref={ref} >\n      <LearningLayout>\n        {highlightList.length > 0\n          ? highlightList\n          : <MenuEmpty text=\"Empty highlights!\" />\n        }\n      </LearningLayout>\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  control: MenuControl;\n  onToggle: () => void;\n  onClickHighlight: (highlightNode: any) => void;\n  emitEvent: () => void;\n  viewerRef: any;\n}\n\nexport default React.forwardRef(Note)","import ViewerLayout from 'types/viewerLayout'\n\n/** Epub viewer layout size */\nconst viewerLayout: ViewerLayout = {\n  MIN_VIEWER_WIDTH: 300,  \n  MIN_VIEWER_HEIGHT: 300,\n  VIEWER_HEADER_HEIGHT: 64,\n  VIEWER_FOOTER_HEIGHT: 60,\n\tVIEWER_SIDEMENU_WIDTH: 0\n}\n\nexport const contextmenuWidth = 160;\n\nexport default viewerLayout","import styled, { css } from 'styled-components'\n// lib\nimport { contextmenuWidth } from 'lib/styles/viewerLayout'\nimport * as styles from 'lib/styles/styles'\nimport zIndex from 'lib/styles/zIndex'\n\nconst Wrapper = styled.div<Props>`\n  position: absolute;\n  left: ${({ x }) => window.innerWidth < x + contextmenuWidth\n    ? `${window.innerWidth - contextmenuWidth}px`\n    : `${x}px`\n  };\n  top: ${({ y }) => window.innerHeight < y + 40\n    ? `${window.innerHeight - 40}px`\n    : `${y}px`\n  };\n  width: ${({ width }) => width + 'px'};\n  height: ${({ height }) => height + 'px'};\n  box-sizing: border-box;\n  padding: ${({ width }) => width > 0\n    ? `4px`\n    : ``\n  };\n  border-radius: 8px;\n  background-color: rgba(0,0,0,.8);\n  box-shadow: ${styles.boxShadow.regular};\n  z-index: ${zIndex.menu};\n\n  & > div:first-child {\n    height: 100%;\n    overflow-y: auto;\n    ${styles.scrollbar(0)};\n  }\n\n  &::before {\n    display: ${({ width }) => width > 0\n      ? `black`\n      : `none`\n    };\n    content: \"\";\n    position: absolute;\n    left: 80px;\n    ${({ isReverse }) => isReverse\n      ? css`bottom: -16px;`\n      : css`top: -16px;`\n    }\n    transform: translateX(-8px);\n    border: 8px solid rgba(0,0,0,0);\n    ${({ isReverse }) => isReverse\n      ? css`border-top: 8px solid rgba(0,0,0,.8);`\n      : css`border-bottom: 8px solid rgba(0,0,0,.8);`\n    }\n    z-index: 1;\n  }\n`;\n\ninterface Props {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  isReverse: boolean;\n}\n\nexport default Wrapper","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst ColorItem = ({ name, color, onClick }: Props) => {\n  const onClickItem = (e: any) => {\n    onClick();\n    e.target.blur();\n  };\n\n  return (\n    <Wrapper onClick={onClickItem}>\n      <ColorWrapper>\n        <Color color={color} />\n      </ColorWrapper>\n      <Message>{name}</Message>\n    </Wrapper>\n  );\n}\n\nconst Wrapper = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  background-color: rgba(0,0,0,0);\n  transition: .1s ${styles.transition};\n  outline: none;\n\n  &:hover, &:focus {\n    background-color: ${palette.blue3};\n\n    & > span {\n      color: #fff;\n    }\n  }\n`;\n\nconst ColorWrapper = styled.div`\n  width: 16px;\n  height: 16px;\n  border-radius: 16px;\n  background-color: #fff;\n  margin-right: 16px;\n`;\n\nconst Color = styled.div<{ color: string }>`\n  width: 16px;\n  height: 16px;\n  border-radius: 16px;\n  background-color: ${({ color }) => color};\n  opacity: .4;\n`;\n\nconst Message = styled.span`\n  width: 48px;\n  font-size: 14px;\n  color: #ddd;\n  line-height: 20px;\n`;\n\ninterface Props {\n  name: string;\n  color: string;\n  onClick: () => void;\n}\n\nexport default ColorItem","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst Item = ({ text, onClick }: Props) => {\n  return <Container onClick={onClick}>{text}</Container>;\n}\n\nconst Container = styled.button`\n  width: 100%;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  font-size: 14px;\n  color: #ccc;\n  transition: .1s ${styles.transition};\n  background-color: rgba(0,0,0,0);\n  border-radius: 6px;\n  cursor: pointer;\n  outline: none;\n\n  &:focus, &:hover {\n    color: #fff;\n    background-color: ${palette.red3};\n  }\n`;\n\ninterface Props {\n  text: string;\n  onClick: (e?: any) => void;\n}\n\nexport default Item","import { useState, useEffect, useCallback, useRef } from 'react'\nimport { useSelector } from 'react-redux'\n// components\nimport Wrapper from 'components/contextMenu/Wrapper'\nimport ColorItem from 'components/contextMenu/ColorItem'\nimport Item from 'components/contextMenu/Item'\n// utils\nimport { getParagraphCfi } from 'lib/utils/commonUtil'\n// slices\nimport { contextmenuWidth } from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport Highlight, { Color } from 'types/highlight'\nimport Selection from 'types/selection'\n\n\nconst ContextMenu = ({ \n  active,\n  viewerRef, \n  selection, \n  onAddHighlight,\n  onRemoveHighlight,\n  onUpdateHighlight, \n  onContextmMenuRemove\n}: Props) => {\n  const highlights = useSelector<RootState, Highlight[]>(state => state.book.highlights);\n  const colorList = useSelector<RootState, Color[]>(state => state.book.colorList);\n\n  const menuRef = useRef<HTMLDivElement | null>(null);\n\n  const [highlight, setHighlight] = useState<Highlight | null>(null);\n  \n  const [display, setDisplay] = useState<boolean>(false);\n  const [isEraseBtn, setIsEraseBtn] = useState<boolean>(false);\n  const [isReverse, setIsReverse] = useState<boolean>(false);\n  \n  const [height, setHeight] = useState<number>(0);\n  const [y, setY] = useState<number>(selection.y);\n\n  const ColorList = colorList.map(\n    color => <ColorItem key={color.code}\n                        name={color.name}\n                        color={color.code}\n                        onClick={selection.update\n                          ? () => onUpdateHighlight(highlight, color.code)\n                          : () => onAddHighlight(color.code)\n                        } />\n  );\n\n  \n  /** Remove highlight */\n  const onRemoveHighlight_ = useCallback(() => {\n    if (!highlight) return;\n\n    onRemoveHighlight(highlight.key, highlight.cfiRange);\n    onContextmMenuRemove();\n    \n    setIsEraseBtn(false);\n  }, [highlight, onRemoveHighlight, onContextmMenuRemove]);\n\n  /** \n   * Remove contextmenu\n   * @param e Mouse Event\n   * @param e.path\n   */\n  const onRemove = useCallback(({ path }: any) => {\n    if (!menuRef.current) return;\n\n    if ([...path].includes(menuRef.current)) return;\n    onContextmMenuRemove();\n  }, [menuRef, onContextmMenuRemove]);\n  \n  /** \n   * Arrow event\n   * @param e Keyboard Event\n   * @param e.key\n   */\n  const onKeyPress = useCallback(({ key }: any) => {\n    key && key === \"ArrowLeft\" && onContextmMenuRemove();\n    key && key === \"ArrowRight\" && onContextmMenuRemove();\n  }, [onContextmMenuRemove]);\n\n\n  /** Check whether the menu button is visible */\n  useEffect(() => {\n    if (!active) setIsEraseBtn(false);\n\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n\n    const filtered = highlights.filter(highlight => highlight.key === paragraphCfi + selection.cfiRange);\n\n    if (!filtered.length) return;\n    const highlight_ = filtered[0];\n    setHighlight(highlight_);\n\n    if (selection.update) {\n      setIsEraseBtn(true);\n    } else {\n      setIsEraseBtn(false);\n    }\n  }, [\n    active,\n    highlights, \n    selection.cfiRange,\n    selection.update\n  ]);\n\n  /** Register contextmenu events */\n  useEffect(() => {\n    if (!viewerRef.current) return;\n    \n    const iframe = document.querySelector('iframe');\n    const node = iframe && iframe.contentWindow && iframe.contentWindow.document;\n    const scrolledTarget = viewerRef.current.querySelector('div');\n\n    if (active) {\n      setDisplay(true);\n      scrolledTarget && scrolledTarget.addEventListener('scroll', onContextmMenuRemove);\n      node && node.addEventListener('mousedown', onRemove);\n      node && node.addEventListener('keyup', onKeyPress);\n      document.addEventListener('mousedown', onRemove);\n      document.addEventListener('keyup', onKeyPress);\n    } else {\n      setDisplay(false);\n      scrolledTarget && scrolledTarget.removeEventListener('scroll', onContextmMenuRemove);\n      node && node.removeEventListener('mousedown', onRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('mousedown', onRemove);\n      document.removeEventListener('keyup', onKeyPress);\n    };\n\n    return () => {\n      node && node.removeEventListener('mousedown', onContextmMenuRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('keyup', onKeyPress);\n    }\n  }, [\n    viewerRef, \n    active,\n    onRemove,\n    onContextmMenuRemove, \n    onKeyPress\n  ]);\n\n  /** Set modified contextmenu height & whether menu is reverse */\n  useEffect(() => {\n    const menuPadding = 8;\n    const itemHeight = 32;\n    let itemCnt = ColorList.length;\n    \n    if (isEraseBtn) itemCnt += 1;\n    \n    const defaultHeight = itemCnt * itemHeight + menuPadding;\n    let y_ = selection.y;\n    const { innerHeight } = window;\n    \n    if (selection.y + defaultHeight > innerHeight) {\n      y_ = selection.y - selection.height - (defaultHeight);\n      if (y_ < 0) {\n        setHeight(defaultHeight + y_ - 8);\n        y_ = 8;\n      } else {\n        setHeight(defaultHeight);\n      }\n      setIsReverse(true);\n    } else {\n      setHeight(defaultHeight);\n      setIsReverse(false);\n    }\n\n    setY(y_);\n  }, [\n    selection.y, \n    selection.height, \n    ColorList, \n    isEraseBtn, \n    setHeight\n  ]);\n\n\n  return (<>\n    {display && <Wrapper x={selection.x} \n                         y={y} \n                         width={contextmenuWidth}\n                         height={height}\n                         isReverse={isReverse}\n                         ref={menuRef}>\n      <div>\n        {ColorList}\n        {isEraseBtn && <Item text=\"Remove\" onClick={onRemoveHighlight_} />}\n      </div>\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  active: boolean;\n  viewerRef: any;\n  selection: Selection;\n  onAddHighlight: (color: string) => void;\n  onRemoveHighlight: (key: string, cfiRange: string) => void;\n  onUpdateHighlight: (highlight: Highlight | null, color: string) => void;\n  onContextmMenuRemove: () => void;\n}\n\nexport default ContextMenu","import { keyframes } from 'styled-components';\n\nconst fadeIn = keyframes`\n\t0% { opacity: 0; }\n\t100% { opacity: 1;}\n`;\nconst fadeOut = keyframes`\n\t0% { opacity: 1; }\n\t100% { opacity: 0; }\n`;\nconst fadeInTop = keyframes`\n\t0% { opacity: 0; transform: translateY(-40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n`;\nconst fadeOutTop = keyframes`\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(-40px); }\n`;\nconst fadeInBottom = keyframes`\n\t0% { opacity: 0; transform: translateY(40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n`;\nconst fadeOutBottom = keyframes`\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(40px); }\n`;\nconst fadeInLeft = keyframes`\n\t0% { opacity: 0; transform: translateX(-40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n`;\nconst fadeOutLeft = keyframes`\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(-40px); }\n`;\nconst fadeInRight = keyframes`\n\t0% { opacity: 0; transform: translateX(40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n`;\nconst fadeOutRight = keyframes`\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(40px); }\n`;\nconst spin = keyframes`\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n`;\n\nconst animations = {\n\tfadeIn,\n\tfadeOut,\n\tfadeInTop,\n\tfadeOutTop,\n\tfadeInBottom,\n\tfadeOutBottom,\n\tfadeInLeft,\n\tfadeOutLeft,\n\tfadeInRight,\n\tfadeOutRight,\n\tspin\n};\n\nexport default animations","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport media from 'lib/styles/media'\nimport palette from 'lib/styles/palette'\nimport animations from 'lib/styles/animations'\n// types\nimport SnackbarType from 'types/snackbar'\n\nconst Snackbar = ({ onClick, text, type }: Props)=> {\n\treturn (\n\t  <Container onClick={onClick} type={type}>\n\t  \t<Content>\n\t  \t  <Message>{text}</Message>\n\t  \t</Content>\n\t  </Container>\n\t);\n}\n\nconst Container = styled.div<{ type: SnackbarType }>`\n\tposition: relative;\n\twidth: 320px;\n\theight: auto;\n\tmax-height: 800px;\n\tbackground-color: ${({ type }) => {\n\t\t\tif (type === 'SUCCESS') {\t\n\t\t\t\treturn palette.green4;\n\t\t\t} else if (type === 'WARNING') {\n\t\t\t\treturn palette.orange4;\n\t\t\t} else if (type === 'ERROR') {\n\t\t\t\treturn palette.red3;\n\t\t\t} else if (type === 'INFO') {\n\t\t\t\treturn palette.blue4;\n\t\t\t} else {\n\t\t\t\treturn palette.gray4;\n\t\t\t}\n\t\t}\n\t};\n\tbox-shadow: ${styles.boxShadow.regular};\n\tborder-radius: 4px;\n\tanimation: ${animations.fadeInBottom} .3s cubic-bezier(0.25,0.1,0.25,1),\n\t\t\t\t\t\t ${animations.fadeOutBottom} .5s cubic-bezier(0.25,0.1,0.25,1) 3.6s;\n\tcursor: pointer;\n\ttransition: .2s ${styles.transition};\n\t${styles.noselect};\n\n\t&:active {\n\t\ttransform: scale(.97, .97);\n\t}\n\n\t${media.small} {\n\t\tborder-radius: 0px;\n\t\twidth: 100%;\n\t\tmin-height: 1.8rem;\n\t}\n`;\n\nconst Content = styled.div`\n\tposition: relative;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: auto;\n\tmin-height: 2rem;\n\tbox-sizing: border-box;\n\tpadding: 12px 20px;\n\n\t${media.small} {\n\t\tmin-height: 1.6rem;\n\t\tline-height: 1.6rem;\n\t}\n`;\n\nconst Message = styled.div`\n\tposition: relative;\n\tflex-grow: 1;\n\tcolor: white;\n\tfont-size: 14px;\n\twhite-space: pre-wrap;\n\tword-break: keep-all;\n\tvertical-align: top;\n`;\n\n\ninterface Props {\n\tonClick(e: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\n\ttext: string;\n\ttype: SnackbarType;\n}\n\nexport default Snackbar","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\n// types\nimport Snackbar from 'types/snackbar'\n\n\nconst RefEvent: number[] = [];\n\n\n/* \n\tThunks\n*/\nexport const newSnackbar = createAsyncThunk(\n\t'snackbar/newSnackbar',\n\tasync (\n\t\t{ text, type }: SnackbarState, \n\t\t{ dispatch }\n\t) => {\n\t\tif(RefEvent.length !== 0) {\n\t\t\tlet event = RefEvent.shift();\n\t\t\tclearTimeout(event);\n\t\t}\n\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\tawait setTimeout(function() {\n\t\t\tdispatch(SnackbarSlice.actions.appendSnackbar({ text, type: type ? type: \"INFO\" }));\n\t\t\tlet event = window.setTimeout(function() {\n\t\t\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\t\t}, 4000);\n\t\t\tRefEvent.push(event);\n\t\t}, 50);\n\t}\n);\n\n/* \n\tInitial State\n*/\n\nconst initialState: SnackbarState = {\n\ttext: \"\",\n\ttype: \"INFO\"\n}\n\n\n/* \n\tSlice\n*/\nconst SnackbarSlice = createSlice({\n\tname: 'snackbar',\n\tinitialState,\n\treducers: {\n\t\t/** 스낵바 갱신 @dispatch */\n\t\tappendSnackbar(state, action: PayloadAction<SnackbarState>) {\n\t\t\tstate.text = action.payload.text;\n\t\t\tstate.type = action.payload.type;\n\t\t},\n\t\t/** 스낵바 초기화 @dispatch */\n\t\tdeleteSnackbar(state) {\n\t\t\tstate.text = \"\";\n\t\t\tstate.type = \"INFO\"\n\t\t}\n\t}\n});\n\n\nexport interface SnackbarState {\n\ttext: string;\n\ttype: Snackbar;\n}\n\nexport const {\n\tappendSnackbar,\n\tdeleteSnackbar\n} = SnackbarSlice.actions\n\nexport default SnackbarSlice.reducer","import styled from 'styled-components'\nimport { useSelector, useDispatch } from 'react-redux'\n// components\nimport Snackbar from 'components/commons/Snackbar'\n// lib\nimport zIndex from 'lib/styles/zIndex'\nimport media from 'lib/styles/media'\n// slices\nimport { deleteSnackbar } from 'slices/snackbar'\n// types\nimport { RootState } from 'slices'\nimport { SnackbarState } from 'slices/snackbar'\n\n\nconst SnackbarWrapper = ()=> {\n  const dispatch = useDispatch();\n\tconst snackbar = useSelector<RootState, SnackbarState>(state => state.snackbar);\n\t\n\n\tconst onClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\tif (e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t\tdispatch(deleteSnackbar());\n\t};\n\n\t\n\treturn (\n\t\t<Container>\n\t\t\t{snackbar.text !== '' && <Snackbar onClick={onClick} \n                                         text={snackbar.text} \n                                         type={snackbar.type} />}\n\t\t</Container>\n\t);\n}\n\nconst Container = styled.div`\n\tposition: fixed;\n\ttop: 40px;\n\tright: 30px;\n\twidth: 320px;\n\theight: auto;\n\tz-index: ${zIndex.snackbar};\n\n\t${media.small} {\n\t\twidth: 100%;\n\t\ttop: initial;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tmargin: auto;\n\t}\n`;\n\nexport default SnackbarWrapper","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\n\nconst ViewerWrapper = styled.div`\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  ${styles.scrollbar(0)};\n`;\n\nexport default ViewerWrapper","import styled, { keyframes } from 'styled-components'\n\nconst LoadingView = () => {\n  return (\n    <LoadingWrapper>\n      <Wrapper>\n        <Content />\n      </Wrapper>\n    </LoadingWrapper>\n  );\n}\n\nconst spin = keyframes`\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n`;\n\nconst LoadingWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Wrapper = styled.div`\n\tposition: relative;\n\twidth: 100%;\n\theight: 30px;\n\tmargin: 30px 0;\n\ttext-align: center;\n`;\n\nconst Content = styled.div`\n\tdisplay: inline-block;\n\twidth: 30px;\n\theight: 30px;\n\tborder: 3px solid #ebf1ff;\n\tborder-radius: 50%;\n\tborder-top-color: #3972ff;\n\tanimation: ${spin} 1s ease-in-out infinite;\n`;\n\nexport default LoadingView","import { configureStore } from \"@reduxjs/toolkit\";\nimport { combineReducers } from 'redux'\n// reducers\nimport book from 'slices/book'\nimport snackbar from 'slices/snackbar'\n\n/**\n * 모든 리듀서가 결합된 Root 리듀서\n */\nconst reducer = combineReducers({\n\tbook,\n\tsnackbar\n});\n\nexport type RootState = ReturnType<typeof reducer>\n\n/**\n * 공통 Store\n */\nconst store = configureStore({\n\treducer,\t\n});\n\nexport default store","import { useState, useEffect, useCallback } from 'react';\n\n/**\n * Epub Reader 메뉴를 컨트롤 하는 hook\n * - control의 display를 Menu 생성/제거 플래그로 이용합니다.\n * - control의 show를 Animaton 플래그로 이용합니다.\n * - Menu 이외의 영역 클릭시 Close Event 발동\n *\n * @param ref DOM을 가지고 있는 useRef\n * @param delay 애니메이션 딜레이 시간(ms)\n * \n * @example\n * const Viewer = () => {\n *   const menuDelay = 300;\n * \n *   const ref = useRef<HTMLDivElement | null>(null);\n *   const [control, onToggle] = usemenu(ref, menuDelay);\n * \n *   return (<>\n *     <MenuOpenBtn onClick={onToggle} />\n *     <Menu control={control} onToggle={onToggle} ref={ref} />\n *   </>);\n * }\n * \n * const Menu = ({ control, onToggle }, ref) => {\n *   return (<>\n *     {control.display && <MenuWrapper show={control.show} \n *                                      delay={menuDelay}\n *                                      ref={ref}>\n *       <CloseBtn onClick={onToggle} />\n *     </MenuWrapper>}\n *   </>);\n * }\n * \n * const MenuWrapper = styled.div<{show: boolean; delay: boolean;}>`\n *   transform: ${({show}) => show\n *     ? \"translateX(0px)\"\n *     : \"translateX(420px)\"\n *   };\n *   transition: ${({delay}) => `${delay}ms ease`};\n * `;\n */\nfunction useMenu(ref: { current: any }, delay: number) {\n\tconst [eventSignal, setEventSignal] = useState<boolean>(true);\n\tconst [control, setControl] = useState<MenuControl>({\n\t\tdisplay: false,\n\t\topen: false\n\t});\n\t\n\n\t/** Menu 토글 */\n\tconst onToggle = useCallback(() => {\n\t\tlet event: any = null;\n\t\twindow.clearTimeout(event);\n\t\tif (!control.display) {\n\t\t\tsetControl({ display: true, open: false });\n\t\t\tevent = window.setTimeout(() => setControl({ display: true, open: true}), 0);\n\t\t} else {\n\t\t\tsetControl({ display: true, open: false });\n\t\t\tevent = window.setTimeout(() => setControl({ display: false, open: false }), delay - 50);\n\t\t}\n\t}, [control.display, delay]);\n\n\t/** \n\t * 메뉴 닫기 \n\t * - Event path에서 메뉴가 포함되어있지 않으면, 함수를 실행합니다.\n\t */\n  const onClose = useCallback((e: any) => {\n    if (!ref || !ref.current) return;\n    if (!e.path.includes(ref.current)) {\n\t\t\tonToggle();\n    }\n  }, [ref, onToggle]);\n\n\t/** \n\t * 이벤트 재등록\n\t * - '보기설정' 에서 rendition이 재 렌더링 될 때, 이벤트를 재등록하기 위한 함수\n\t * - Iframe 생성 시간 대기 [About 250ms]\n\t */\n\tconst emitEvent = useCallback(() => {\n\t\twindow.setTimeout(() => setEventSignal(true), 300);\n\t}, [setEventSignal]); \n\n\n  /** \n\t * 목차 닫기 이벤트 등록 \n\t * - Epub이 iframe으로 등록되므로, iframe에도 Event를 등록시켜줍니다.\n\t */\n  useEffect(() => {\n\t\tif (!eventSignal && !control.display) return;\n\t\t\n    const epubIframe = document.querySelector('iframe');\n\n\t\tif (control.display) {\n\t\t\tdocument.addEventListener('click', onClose);\n\t\t\tif (epubIframe && epubIframe.contentWindow) {\n\t\t\t\tepubIframe.contentWindow.document.addEventListener('click', onClose);\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.removeEventListener('click', onClose);\n      if (epubIframe && epubIframe.contentWindow) {\n\t\t\t\tepubIframe.contentWindow.document.removeEventListener('click', onClose);\n      }\n\t\t}\n\n\t\tsetEventSignal(false);\n  \n    return () => {\n      document.removeEventListener('click', onClose);\n      if (epubIframe && epubIframe.contentWindow) {\n\t\t\t\tepubIframe.contentWindow.document.removeEventListener('click', onClose);\n      }\n    }\n  }, [control.display, onClose, eventSignal]);\n\n\treturn [control, onToggle, emitEvent] as const;\n}\n\nexport type MenuControl = {\n\tdisplay: boolean;\n\topen: boolean;\n}\n\nexport default useMenu","import React, { useState, useEffect, useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n// slices\nimport { pushHighlight, popHighlight, updateHighlight } from 'slices/book'\nimport { newSnackbar } from 'slices/snackbar'\n// utils\nimport {  \n\tgetParagraphCfi,\n\tclashCfiRange, \n\tgetSelectionPosition,\n\tcompareCfi,\n\tcfiRangeSpliter,\n\tgetNodefromCfi\n} from 'lib/utils/commonUtil'\n// styles\nimport viewerLayout, { contextmenuWidth } from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport { BookStyle, BookFlow } from 'types/book'\nimport Page from 'types/page'\nimport Selection from 'types/selection'\nimport Highlight from 'types/highlight'\n\n\n/**\n * Epub Reader의 Highlight 관련 hook\n * - [selection]: 현재 selection의 정보\n * - [onSelection]: selection 적용 함수 (Iframe에 selection 이벤트로 등록해야 합니다.)\n * - [onClickHighlight]: highlight 클릭 함수\n * - [onAddHighlight] highlight 생성 함수\n * - [onRemoveHighlight]: highlight 제거 함수\n * - [onUpdateHighlight]: highlight 갱신 함수\n *\n * @param viewerRef Viewer에 등록된 가지고 있는 useRef\n * @param setIsContextMenu Contextmenu를 컨트롤 할 수 있는 useState 함수\n * \n * @example\n * const [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n * \n * const { \n * \tselection, \n * \tonSelection, \n * \tonClickHighlight,\n * \tonRemoveHighlight\n * } = useSelection(viewerRef, setIsContextMenu);\n */\nconst useHighlight = (\n\tviewerRef: any, \n\tsetIsContextMenu: React.Dispatch<React.SetStateAction<boolean>>,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow\n) => {\n\tconst dispatch = useDispatch();\n\tconst currentLocation = useSelector<RootState, Page>(state => state.book.currentLocation);\n\tconst highlights = useSelector<RootState, Highlight[]>(state => state.book.highlights);\n\n\tconst [selection, setSelection] = useState<Selection>({\n\t\tupdate: false,\n\t\tx: 0,\n\t\ty: 0,\n\t\theight: 0,\n\t\tcfiRange: '',\n\t\tcontent: ''\n\t});\n\t\n\n\t/** \n\t * Selection 발동 이벤트\n\t * @param cfiRange CfiRange\n\t * @return Whether event is success\n\t */\n\tconst onSelection = useCallback((cfiRange: string): boolean => {\n\t\tif (!viewerRef.current) return false;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return false;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return false;\n\t\t\n\t\tconst filtered = highlights.filter(\n\t\t\thighlight => clashCfiRange(highlight.cfiRange, cfiRange)\n\t\t);\n\n\t\tif (filtered.length > 0) {\n\t\t\tdispatch(newSnackbar({\n        text: \"There are already registered highlights in your selection.\", \n        type: \"WARNING\" \n      }));\n\n\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst position = getSelectionPosition(\n\t\t\tviewerRef.current,\n\t\t\tbookStyle,\n\t\t\tbookFlow,\n\t\t\tviewerLayout.MIN_VIEWER_WIDTH,\n\t\t\tviewerLayout.MIN_VIEWER_HEIGHT,\n\t\t\tviewerLayout.VIEWER_HEADER_HEIGHT,\n\t\t\tcontextmenuWidth\n\t\t);\n\t\tif (!position) return false;\n\n\t\tconst { x, y, height } = position;\n\n\t\tconst content = iframeWin.getSelection().toString().trim();\n\n\t\tif (content.length === 0) return false;\n\t\t\n\t\tsetSelection({ \n\t\t\tupdate: false,\n\t\t\tx, \n\t\t\ty,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent\n\t\t});\n\t\t\n\t\treturn true;\n\t}, [\n\t\tdispatch, \n\t\tviewerRef,\n\t\thighlights, \n\t\tbookFlow, \n\t\tbookStyle,\n\t\tsetSelection\n\t]);\n\n\t/** Highlight 클릭 이벤트 */\n\tconst onClickHighlight = useCallback((highlightNode: HTMLElement) => {\n\t\tconst targetNode = highlightNode.parentElement;\n\t\tif (!targetNode) return;\n\n\t\tconst cfiRange = targetNode.dataset.epubcfi;\n\t\tif (!cfiRange) return;\n\n\t\tconst { x, y, width, height } = targetNode.getBoundingClientRect();\n\n\t\tsetSelection({ \n\t\t\tupdate: true,\n\t\t\tx: x + width / 2 - contextmenuWidth / 2, \n\t\t\ty: y + height,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent: \"\"\n\t\t});\n\t}, [setSelection]);\n\n\t/** 하이라이트 생성 함수 */\n\tconst onAddHighlight = useCallback((color: string) => {\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n    \n    const highlight: Highlight = {\n      key: paragraphCfi + selection.cfiRange,\n      accessTime: new Date().toISOString(),\n      createTime: new Date().toISOString(),\n      color,\n      paragraphCfi,\n      cfiRange: selection.cfiRange,\n      chpaterName: currentLocation.chapterName,\n      pageNum: currentLocation.currentPage,\n      content: selection.content\n    };\n\n    dispatch(pushHighlight(highlight));\n\n\t\tsetSelection({ ...selection, update: true });\n  }, [dispatch, selection, currentLocation]);\n\n\t/** \n   * 하이라이트 수정\n   * @param color 색상 Hex 코드\n   */\n\tconst onUpdateHighlight = useCallback((highlight: Highlight | null, color: string) => {\n\t\tif (!highlight) return;\n\n    dispatch(updateHighlight({\n      ...highlight,\n      color\n    }));\n  }, [dispatch]);\n\n\t/** \n\t * 하이라이트 제거 함수 \n\t * @param key 북마크 식별값\n\t */\n\t const onRemoveHighlight = useCallback((key: string, cfiRange: string) => {\n\t\tif (!viewerRef.current || !key) return;\n\n\t\tdispatch(popHighlight(key));\n\n\t\tdispatch(newSnackbar({\n\t\t\ttext: \"The highlight removed successful!\", \n\t\t\ttype: \"INFO\" \n\t\t}));\n\t\t\n\t\tviewerRef.current.offHighlight(cfiRange);\n\t}, [dispatch, viewerRef]);\n\n\n\t/**\n\t * 하이라이트 여부 확인\n\t * - 페이지 변경에 따른 하이라이트 확인 및 적용\n\t */\n\t useEffect(() => {\n\t\tif (!viewerRef.current) return;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return;\n\n\t\thighlights.forEach(highlight => {\n\t\t\tconst cfiRange = cfiRangeSpliter(highlight.cfiRange);\n\t\t\tif (!cfiRange) return;\n\n\t\t\tconst { startCfi } = cfiRange;\n\n\t\t\tif (compareCfi(currentLocation.startCfi, startCfi) < 1\n\t\t\t\t&& compareCfi(currentLocation.endCfi, startCfi) > -1) {\n\t\t\t\tconst node = getNodefromCfi(highlight.paragraphCfi);\n\t\t\t\tif (!node) return;\n\n\t\t\t\tviewerRef.current.onHighlight(\n\t\t\t\t\thighlight.cfiRange,\n\t\t\t\t\t(e: any) => {\n\t\t\t\t\t\tonClickHighlight(e.target);\n\t\t\t\t\t\tsetIsContextMenu(true);\n\t\t\t\t\t},\n\t\t\t\t\thighlight.color \n\t\t\t\t);\n\n\t\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\t}\n\t\t});\n\t}, [\n\t\tdispatch,\n\t\tviewerRef, \n\t\tcurrentLocation, \n\t\thighlights, \n\t\tonRemoveHighlight,\n\t\tonClickHighlight,\n\t\tsetIsContextMenu\n\t]);\n\n\n\treturn { \n\t\tselection, \n\t\tonSelection, \n\t\tonClickHighlight,\n\t\tonAddHighlight,\n\t\tonRemoveHighlight,\n\t\tonUpdateHighlight\n\t};\n}\n\nexport default useHighlight;","import { useState, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Provider } from 'react-redux'\nimport { ReactEpubViewer } from 'react-epub-viewer'\n// containers\nimport Header from 'containers/Header'\nimport Footer from 'containers/Footer'\nimport Nav from 'containers/menu/Nav'\nimport Option from 'containers/menu/Option'\nimport Learning from 'containers/menu/Note'\nimport ContextMenu from 'containers/commons/ContextMenu'\nimport Snackbar from 'containers/commons/Snackbar'\n// components\nimport ViewerWrapper from 'components/commons/ViewerWrapper'\nimport LoadingView from 'LoadingView'\n// slices\nimport store from 'slices'\nimport { updateBook, updateCurrentPage, updateToc } from 'slices/book'\n// hooks\nimport useMenu from 'lib/hooks/useMenu'\nimport useHighlight from 'lib/hooks/useHighlight'\n// styles\nimport 'lib/styles/readerStyle.css'\nimport viewerLayout from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport { ViewerRef } from 'types'\nimport Book, { BookStyle, BookOption } from 'types/book'\nimport Page from 'types/page'\nimport Toc from 'types/toc'\n\n\nconst Reader = ({ url, loadingView }: Props) => {\n  const dispatch = useDispatch();\n\tconst currentLocation = useSelector<RootState, Page>(state => state.book.currentLocation);\n  \n\tconst viewerRef = useRef<ViewerRef | any>(null);\n\tconst navRef = useRef<HTMLDivElement | null>(null);\n  const optionRef = useRef<HTMLDivElement | null>(null);\n  const learningRef = useRef<HTMLDivElement | null>(null);\n\n\tconst [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n\t\n\tconst [bookStyle, setBookStyle] = useState<BookStyle>({\n    fontFamily: 'Origin',\n    fontSize: 18,\n    lineHeight: 1.4,\n    marginHorizontal: 15,\n    marginVertical: 5\n  });\n\n  const [bookOption, setBookOption] = useState<BookOption>({\n    flow: \"paginated\",\n    resizeOnOrientationChange: true,\n    spread: \"auto\"\n  });\n\n\tconst [navControl, onNavToggle] = useMenu(navRef, 300.);\n\tconst [optionControl, onOptionToggle, emitEvent] = useMenu(optionRef, 300);\n\tconst [learningControl, onLearningToggle] = useMenu(learningRef, 300);\n\tconst { \n\t\tselection, \n\t\tonSelection, \n\t\tonClickHighlight,\n\t\tonAddHighlight,\n\t\tonRemoveHighlight,\n\t\tonUpdateHighlight\n\t} = useHighlight(viewerRef, setIsContextMenu, bookStyle, bookOption.flow);\n\n\n\n\t/**\n\t * Change Epub book information\n\t * @param book Epub Book Info\n\t */\n\tconst onBookInfoChange = (book: Book) => dispatch(updateBook(book));\n\n  /**\n\t * Change Epub location\n\t * @param loc epubCFI or href\n\t */\n\tconst onLocationChange = (loc: string) => {\n\t\tif (!viewerRef.current) return;\n\t\tviewerRef.current.setLocation(loc);\n\t}\t\n\t\n\t/**\n\t * Move page\n\t * @param type Direction\n\t */\n\tconst onPageMove = (type: \"PREV\" | \"NEXT\") => {\n\t\tconst node = viewerRef.current;\n\t\tif (!node || !node.prevPage || !node.nextPage) return;\n\n\t\ttype === \"PREV\" && node.prevPage();\n\t\ttype === \"NEXT\" && node.nextPage();\n\t};\n\n\t/**\n\t * Set toc\n\t * @param toc Table of Epub contents\n\t */\n\tconst onTocChange = (toc: Toc[]) => dispatch(updateToc(toc));\n\n\t/** \n\t * Set Epub viewer styles\n\t * @param bokkStyle_ viewer style\n\t */\n\tconst onBookStyleChange = (bookStyle_: BookStyle) => setBookStyle(bookStyle_);\n\n\t/** \n\t * Set Epub viewer options\n\t * @param bookOption_ viewer option\n\t */\n\t const onBookOptionChange = (bookOption_: BookOption) => setBookOption(bookOption_);\n\n\t/**\n\t * Change current page\n\t * @param page Epub page\n\t */\n\tconst onPageChange = (page: Page) => dispatch(updateCurrentPage(page));\n\n\t/** \n\t * ContextMenu on \n\t * @param cfiRange CfiRange\n\t */\n\tconst onContextMenu = (cfiRange: string) => {\n\t\tconst result = onSelection(cfiRange);\n\t\tsetIsContextMenu(result);\n\t}\n\n\t/** ContextMenu off */\n\tconst onContextmMenuRemove = () => setIsContextMenu(false);\n\n\t\n\t\n  return (<>\n    <ViewerWrapper>\n      <Header \n\t\t\t\tonNavToggle={onNavToggle}\n\t\t\t\tonOptionToggle={onOptionToggle}\n\t\t\t\tonLearningToggle={onLearningToggle}\n\t\t\t/>\n\n      <ReactEpubViewer \n\t\t\t\turl={url}\n\t\t\t\tviewerLayout={viewerLayout}\n\t\t\t\tviewerStyle={bookStyle}\n\t\t\t\tviewerOption={bookOption}\n\t\t\t\tonBookInfoChange={onBookInfoChange}\n\t\t\t\tonPageChange={onPageChange}\n\t\t\t\tonTocChange={onTocChange}\n\t\t\t\tonSelection={onContextMenu}\n\t\t\t\tloadingView={loadingView || <LoadingView />}\n\t\t\t\tref={viewerRef}\n\t\t\t/>\n      \n\t\t\t<Footer \n\t\t\t\ttitle={currentLocation.chapterName}\n\t\t\t\tnowPage={currentLocation.currentPage}\n\t\t\t\ttotalPage={currentLocation.totalPage}\n\t\t\t\tonPageMove={onPageMove}\n\t\t\t/>\n    </ViewerWrapper>\n\n    <Nav\n\t\t\tcontrol={navControl}\n\t\t\tonToggle={onNavToggle}\n\t\t\tonLocation={onLocationChange}\n\t\t\tref={navRef}\n\t\t/>\n    \n    <Option \n\t\t\tcontrol={optionControl}\n\t\t\tbookStyle={bookStyle}\n\t\t\tbookOption={bookOption}\n\t\t\tbookFlow={bookOption.flow}\n\t\t\tonToggle={onOptionToggle} \n\t\t\temitEvent={emitEvent}\n\t\t\tonBookStyleChange={onBookStyleChange}\n\t\t\tonBookOptionChange={onBookOptionChange}\n\t\t\tref={optionRef}\n\t\t/>\n\n\t\t<Learning \n\t\t\tcontrol={learningControl}\n\t\t\tonToggle={onLearningToggle}\n\t\t\tonClickHighlight={onClickHighlight}\n\t\t\temitEvent={emitEvent}\n\t\t\tviewerRef={viewerRef}\n\t\t\tref={learningRef}\n\t\t/>\n\n\t\t<ContextMenu\n\t\t\tactive={isContextMenu}\n\t\t\tviewerRef={viewerRef}\n\t\t\tselection={selection}\n\t\t\tonAddHighlight={onAddHighlight}\n\t\t\tonRemoveHighlight={onRemoveHighlight}\n\t\t\tonUpdateHighlight={onUpdateHighlight}\n\t\t\tonContextmMenuRemove={onContextmMenuRemove}\n\t\t/>\n\n\t\t<Snackbar />\n  </>);\n}\n\nconst ReaderWrapper = ({ url, loadingView }: Props) => {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<Reader url={url} loadingView={loadingView} />\n\t\t</Provider>\n\t);\n}\n\ninterface Props {\n\turl: string;\n\tloadingView?: React.ReactNode;\n}\n\nexport default ReaderWrapper","import { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport Reader from 'containers/Reader'\n// 60d45480d1f4892d14d7b775/pdf/1634964960315.epub\n// let data = window.location.pathname\n// let first = data.split(\"/\")[2]\n// data = data.split(\"/\")[4]\n// console.log(\"data, \",data);\nconst EPUB_URL = `https://ebook12.s3.eu-central-1.amazonaws.com/60d45480d1f4892d14d7b775/pdf/1634964960315.epub`;\nReactDOM.render(<Reader url={EPUB_URL} />,  document.getElementById('root'));"],"sourceRoot":""}